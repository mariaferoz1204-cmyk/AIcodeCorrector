<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Code Debugger</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/homestyle.css') }}">
</head>
<body>

  <header class="header">
    <div class="header-left">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo-image">
      <h1 class="site-title">AI Code Debugger</h1>
    </div>
    
    <nav class="nav">
      <ul class="nav-left">
        <li class="nav-item"><a href="{{ url_for('home') }}">Home</a></li>
        <li class="nav-item"><a href="{{ url_for('view_history') }}">My History</a></li>
        <li class="nav-item"><a href="{{ url_for('about') }}">About</a></li>
      </ul>
      <div class="nav-right">
        <span class="user-greeting">Hi, {{ user }}</span>
        <a href="{{ url_for('logout') }}" class="signup" style="text-decoration: none; text-align: center;">LOGOUT</a>
      </div>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-overlay">
      <h2>Welcome back, <span class="highlight">{{ user }}</span></h2>
      <p>Ready to fix some code? Paste your snippet below.</p>
      
      <div class="debug-container" style="margin-top: 20px;">
          <textarea id="codeInput" placeholder="Paste code here..." style="width: 80%; height: 150px; border-radius: 10px; padding: 10px;"></textarea>
          <br>
          <button class="start-debugging" onclick="runAnalysis()">Start Debugging</button>
      </div>
    </div>
  </section>

  <script>
    async function runAnalysis() {
        const code = document.getElementById('codeInput').value;
        const response = await fetch('/analyze', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ code: code, language: 'Python' })
        });
        const result = await response.json();
        alert(result.status.toUpperCase() + ": " + result.message);
    }
  </script>
</body>
</html>